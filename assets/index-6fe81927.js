(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const M='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/></svg>',P='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M224 96C135.6 96 64 167.6 64 256s71.6 160 160 160s160-71.6 160-160s-71.6-160-160-160zM0 256C0 132.3 100.3 32 224 32s224 100.3 224 224s-100.3 224-224 224S0 379.7 0 256z"/></svg>',f=document.getElementById("board"),h=document.getElementById("playerMove"),a=document.getElementById("btnRestart"),A=[{id:0,val:"X",html:M},{id:1,val:"O",html:P}];let c=0,v=0,p=prompt("Field size (x, y)","3, 3").split(",").map(t=>Number(t));const d=Number(prompt("Number of marks for victory",3));console.log(p);console.log(d);let g=x(...p);function x(t,o){const i=t*o;return f.style.display="grid",f.style.gridTemplate=`repeat(${t}, 5rem) / repeat(${o}, 5rem)`,Array.from({length:i}).map((n,e)=>(n=document.createElement("div"),n.classList.add("cell"),n.setAttribute("id","cell"+e),f.append(n),{id:e,elem:n,val:null,x:e-Math.floor(e/o)*o,y:Math.floor(e/o)}))}console.log(g);function F(t){return g.find(o=>o.id===t)}function I(t,o){return g.find(i=>i.x===t&&i.y===o)}function N(t,o){t.val||(t.val=o.val,t.elem.innerHTML=o.html,v++,c++,y(c)||(c=0),b(y(c)),v>=p[0]*p[1]&&(h.textContent="Draw",a.style.visibility="visible",a.toggleAttribute("disabled",!1)))}function y(t){return A.find(o=>o.id===t)}function b(t){m?h.textContent=`Player ${t.val} has won`:h.textContent=`Player ${t.val} move`}function O(t,o){t&&(b(o),a.style.visibility="visible",a.toggleAttribute("disabled",!1))}function C(t,o,i){const n=[];if(t.length!==0){for(const{x:e,y:r,step:l,relation:s}of t){const u=I(e,r);if(u!==void 0&&u.val===o.val){if(i[s].push(u),i[s].length>=d){for(const L of i[s])L.elem.style.backgroundColor="green";return}s==="h"?n.push({x:e+l,y:r,step:l,relation:s}):s==="v"?n.push({x:e,y:r+l,step:l,relation:s}):s==="ld"?n.push({x:e+l,y:r+l,step:l,relation:s}):s==="rd"&&n.push({x:e+l,y:r-l,step:l,relation:s})}}C(n,o,i)}}let m=!1,w=null;f.onclick=t=>{if(t.target===null||t.target.closest(".cell")===null||m===!0)return;const o=t.target.closest(".cell"),i=Number(o.id.replace("cell","")),n=F(i),e=y(c);N(n,e);const r={h:[n],v:[n],rd:[n],ld:[n]},{x:l,y:s}=n,u=[{x:l-1,y:s,step:-1,relation:"h"},{x:l+1,y:s,step:1,relation:"h"},{x:l,y:s-1,step:-1,relation:"v"},{x:l,y:s+1,step:1,relation:"v"},{x:l-1,y:s-1,step:-1,relation:"ld"},{x:l+1,y:s+1,step:1,relation:"ld"},{x:l-1,y:s+1,step:-1,relation:"rd"},{x:l+1,y:s-1,step:1,relation:"rd"}];if(C(u,e,r),r.h.length>=d||r.v.length>=d||r.rd.length>=d||r.ld.length>=d){m=!0,w=e,O(m,w);return}};a.onclick=()=>{f.innerHTML="",g=x(...p),m=!1,c=0,v=0,b(y(c)),a.style.visibility="hidden",a.toggleAttribute("disabled",!0)};
