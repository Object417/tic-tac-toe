(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();const M='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/></svg>',C='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M224 96C135.6 96 64 167.6 64 256s71.6 160 160 160s160-71.6 160-160s-71.6-160-160-160zM0 256C0 132.3 100.3 32 224 32s224 100.3 224 224s-100.3 224-224 224S0 379.7 0 256z"/></svg>',u=document.getElementById("board"),v=document.getElementById("playerMove"),c=document.getElementById("btnRestart"),P=[{id:0,val:"X",html:M},{id:1,val:"O",html:C}];let a=0,h=0,f=prompt("Field size (x, y)","3, 3").split(",").map(e=>Number(e));const s=Number(prompt("Number of marks for victory",3));console.log(f);console.log(s);let g=x(...f);function x(e,o){const l=e*o;return u.style.display="grid",u.style.gridTemplate=`repeat(${e}, 5rem) / repeat(${o}, 5rem)`,Array.from({length:l}).map((n,t)=>(n=document.createElement("div"),n.classList.add("cell"),n.setAttribute("id","cell"+t),u.append(n),{id:t,elem:n,val:null,x:t-Math.floor(t/o)*o,y:Math.floor(t/o)}))}console.log(g);function A(e){return g.find(o=>o.id===e)}function F(e,o){return g.find(l=>l.x===e&&l.y===o)}function I(e,o){e.val||(e.val=o.val,e.elem.innerHTML=o.html,h++,a++,p(a)||(a=0),b(p(a)),h>=f[0]*f[1]&&(v.textContent="Draw",c.style.visibility="visible",c.toggleAttribute("disabled",!1)))}function p(e){return P.find(o=>o.id===e)}function b(e){m?v.textContent=`Player ${e.val} has won`:v.textContent=`Player ${e.val} move`}function N(e,o){e&&(b(o),c.style.visibility="visible",c.toggleAttribute("disabled",!1))}function L(e,o,l,n,t){let r=o.x,i=o.y;[{x:r-1,y:i,relation:"h"},{x:r+1,y:i,relation:"h"},{x:r,y:i+1,relation:"v"},{x:r,y:i-1,relation:"v"},{x:r+1,y:i+1,relation:"ld"},{x:r-1,y:i-1,relation:"ld"},{x:r-1,y:i+1,relation:"rd"},{x:r+1,y:i-1,relation:"rd"}].forEach(d=>{const y=F(d.x,d.y);y===void 0||y.val!==l.val||e.includes(y.id)||t&&d.relation!==t||(n[d.relation]+=1,e.push(o.id),!(n.h===s||n.v===s||n.rd===s||n.ld===s)&&L(e,y,l,n,d.relation))})}let m=!1,w=null;u.onclick=e=>{if(e.target===null||e.target.closest(".cell")===null||m===!0)return;const o=e.target.closest(".cell"),l=Number(o.id.replace("cell","")),n=A(l),t=p(a);I(n,t);const r={h:1,v:1,rd:1,ld:1};if(L([n.id],n,t,r),r.h===s||r.v===s||r.rd===s||r.ld===s){m=!0,w=t,N(m,w);return}};c.onclick=()=>{u.innerHTML="",g=x(...f),m=!1,a=0,h=0,b(p(a)),c.style.visibility="hidden",c.toggleAttribute("disabled",!0)};
